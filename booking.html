<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>لوحة العميل - مساري</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="booking.css">


        <nav>
            <div class="logo">
                <h1>Masary for Delivery</h1>
            </div>
            <ul class="nav-links">
    <li><a href="main.html">الصفحة الرئيسية</a></li>
    <li><a href="booking.html">الحجز</a></li>
    <li><a href="wallet.html">المحفظة</a></li>
    <li><a href="contact.html">اتصل بنا</a></li>
  </ul>
            </ul>
        </nav>



    <div class="masary-header">
    <h1>مرحباً بك في Masary for Delivery</h1>
  </div>
  
  
  <style>
    body {
      direction: rtl;
      font-family: Arial, sans-serif;
      background-color: #c9d6ff;
    }
    .logo,
    .nav-links{
      background-color: #000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      font-size: 2rem;
      color: white;
      list-style: none;
      display: flex;
      margin: 20 5px;
      color: white;
      text-decoration: none;
      font-size: 18px;
      top: 10px; /* اضبط هذه القيمة حسب الحاجة */
      left: 50%;
      transform: translateX(-0%);
    }

    #map {
      height: 400px;
      width: 100%;
      margin-bottom: 20px;
      z-index: 1
    }
    .routes {
      background: rgb(255, 255, 255);
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .seats {
      margin-top: 10px;
    }
    .seat {
      font-size: 25px;
      display: inline-block;
      width: 40px;
      height: 40px;
      margin: 5px;
      background-color: #6c757d;
      color: white;
      line-height: 40px;
      border-radius: 6px;
      cursor: pointer;
      user-select: none;
    }
    .seat.selected {
      background-color: #198754;
    }
    .seat.occupied {
      background-color: #dc3545;
      cursor: not-allowed;
    }


  </style>
  
</head>

<body>


  <!-- المحتوى الرئيسي -->

  <div class="container mt-3">
    <div id="map"></div>
    <div class="routes">
      <h5>اختـــــــــر خــــط الرحلــــــــة:</h5>
      <select id="routeSelect" class="form-select">
        <option value="1">وسط البلد إلى خلدا</option>
        <option value="2">خلدا إلى الجبيهة</option>
        <option value="3">الياسمين إلى المقبالين</option>
        <option value="4">الطفيلة إلى اربد</option>
        <option value="5">الطفيلة إلى صويلح</option>
      </select>
    </div>
    <div class="routes">
      <h5>اختر مقعداً:</h5>
      <div id="seatContainer"></div>
    </div>

  <button id="bookBtn" class="btn btn-primary mt-3" disabled onclick="redirectToPage()">حجز المقعد</button>
<div id="statusMessage" class="mt-3"></div>

  <script src="scripts.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAOVYRIgupAurZup5y1PRh8Ismb1A3lLao&libraries=places&callback=initMap"></script>
  <script>
    // البيانات المحاكاة للمقاعد المحجوزة لكل خط
    const bookedSeats = {
      "1": [2], // وسط البلد - خلدا، المقعد رقم 2 محجوز
      "2": [],  // وسط البلد - الياسمين
      "3": [1, 3],
      "4": [],
      "5": [4],
    };

    let selectedSeat = null;
    const maxSeats = 4;

    function renderSeats(routeId) {
      const container = document.getElementById('seatContainer');
      container.innerHTML = '';
      for (let i = 1; i <= maxSeats; i++) {
        const seat = document.createElement('div');
        seat.classList.add('seat');
        seat.textContent = i;
        if (bookedSeats[routeId].includes(i)) {
          seat.classList.add('occupied');
        }
        seat.onclick = () => {
          if (seat.classList.contains('occupied')) return;
          if (selectedSeat) {
            selectedSeat.classList.remove('selected');
          }
          seat.classList.add('selected');
          selectedSeat = seat;
          document.getElementById('bookBtn').disabled = false;
        };
        container.appendChild(seat);
      }
    }

    document.getElementById('routeSelect').addEventListener('change', (e) => {
      selectedSeat = null;
      document.getElementById('bookBtn').disabled = true;
      renderSeats(e.target.value);
      updateMap(e.target.value);
    });

        document.getElementById('bookBtn').addEventListener('click', () => {
      if (!selectedSeat) return;   

      // محاكاة عملية تفعيل الزر بعد عملية معينة
  setTimeout(function() {
    document.getElementById("bookBtn").disabled = false;
    document.getElementById("statusMessage").innerHTML = "الزر الآن مفعل، يمكنك الحجز!";
  }, 2000);  // تفعيل الزر بعد 2 ثانية

});

  // دالة لتحويل إلى الصفحة المطلوبة مع الرسالة
  function redirectToPage() {
    // يمكنك إضافة أي رسائل تود أن تظهر عند الانتقال
    document.getElementById("statusMessage").innerHTML = "تم تحويلك إلى صفحة الحجز.";
    setTimeout(function() {
      window.location.href = "carride.html";  // إعادة توجيه الصفحة بعد ظهور الرسالة
    }, 2000); // الانتظار 2 ثانية قبل الانتقال
  
  };

    let map, marker;

    function updateMap(routeId) {
      const routeCoords = {
        "1": { lat: 31.9539, lng: 35.9106 },
        "2": { lat: 32.0056, lng: 35.8769 },
        "3": { lat: 31.9874, lng: 35.8993 },
        "4": { lat: 31.9281, lng: 35.8753 },
        "5": { lat: 31.9455, lng: 35.9301 },
      };
      const pos = routeCoords[routeId];
      if (!map) {
        map = new google.maps.Map(document.getElementById('map'), {
          center: pos,
          zoom: 13,
        });
        marker = new google.maps.Marker({
          position: pos,
          map: map,
          title: 'موقع الرحلة',
        });
      } else {
        map.setCenter(pos);
        marker.setPosition(pos);
      }
    }

    // تهيئة الصفحة
    document.addEventListener('DOMContentLoaded', () => {
      renderSeats('1');
      updateMap('1');
    });

  </script>

  <footer class="footer">
    <p>
        Masary for Delivery © 2025 جميع الحقوق محفوظة لدى
    </p>
  </footer>

</body>
</html>
